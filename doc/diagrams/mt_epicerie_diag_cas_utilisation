@startuml

' VOIR https://plantuml.com/fr/use-case-diagram

' VOIR https://plantuml.com/fr/commons


left to right direction
skinparam packageStyle rectangle


title <u>Épicerie Graine2Vie MT31 - Cas d'Utilisation</u> \n\n\n



' ------------------
' Définition ACTEURS
' ------------------

'actor "Assistante Sociale" as AS

actor Administrateur as A

'actor "Conseiller Insert. Soc. et Prof." as CISP
actor "CISP" as CISP
actor "Commission hebdo (3-4)" as CH
actor "Gestionnaire des Stocks" as GS
actor "Responsable Bénéficiaires" as RB

actor "Accueil" as RA
actor "Vendeurs (3)" as VE
actor "Bénéficiaire \n(env. 300/an) \n(30/permanence) \n(12 max/créneau)" as B
actor "Caissi-er-ère" as C

actor "Banque Alimentaire" as BA
'actor "Fédération Entraide Protestante" as FEP
actor FEP

actor "Président" as P
actor "Trésorier" as T


rectangle "Système Épicerie Graine2Vie MT31" {


' --------------------
' Définition USE CASES
' --------------------

usecase UC1_ABD as "UC1 - Administration Base de Données"

usecase UC2_GB as "UC2 - Gestion Bénéficiaires (consultation, mise à jour)
	..
	(composition famille, critères revenus, charges, contrats, suivi activité)
"
	
usecase "UC3 - Consultation Bénéficiaires" as UC3_CB

usecase UC4a_ELB as "UC4 --Edition liste bénéficiaires autorisés-- (plus nécessaire ?)
	(QUAND : jour de permanence - mardi1-2 ou vendredi1-2)
	..
	(/type-transaction (achat ou colis) puis /créneau)
" 

'usecase UC4_CLB as "CONSULTATION 'liste bénéficiaires autorisés' et MISE-A-JOUR suivi activité
'	(QUAND : jour de permanence)
'	..
'	(présence des pers., paiement ou dette, poids produits /catégorie)
'" 
  
usecase UC5_AE as "UC5 - ACHAT à l'épicerie (ou récupération colis alimentaire)
	..
	(QUAND: jour de permanence, /15 jours, mardi1-2 ou vendredi1-2, 14-17h)
	(3 créneaux 1h prédéfinis, pendant 3-6 mois)
	..
	(présence/absence des pers., 
	calcul prix à payer, paiement ou dette, 
	poids produits /catégorie)
" 

usecase UC6_RABA as "UC6 - Edition Rapport Activité pour Banque Alimentaire
	(QUAND: /trimestre, avant T+1mois)
	..
	(séparer colis et achats)
	nb foyers et pers. inscrites, nb visites épicerie,
	poids total distribué, poids reçu de BA sur période
"

usecase UC7_RAH as "UC7 - Edition Rapport Activité pour FEP (habilitation nationale)
	(QUAND: /an, avant fin février)
	..
	nb foyers et pers. inscrites,
	qté denrées distribuées (total, % BA, % ressources propres),
	typologie pers. (nb F/H, nb par tranche âge),
	nb aides alimentaires
"



' ---------------
' DIAGRAMME
' ---------------

A -- (UC1_ABD)

RB -- (UC2_GB) : données familles \n<< primary >> 
CISP -- (UC2_GB) : données familles
CH -- (UC2_GB) : données familles
GS -- (UC2_GB) : poids denrées distribuées
  
P -- (UC3_CB)
T -- (UC3_CB)

RB -- (UC4a_ELB)
'RA -- (UC4_CLB)
    
RA -- (UC5_AE) : autorisation [et mise à jour suivi activité]
VE -- (UC5_AE) : aide, conseil, suivi activité
B -- (UC5_AE) : Achat \n<< primary >>
C -- (UC5_AE) : encaissement (ou saisie dette)
'(UC5_AE) -- C : encaissement (ou saisie dette)

RB -- (UC6_RABA)
(UC6_RABA) -- BA

RB -- (UC7_RAH)
(UC7_RAH)  -- FEP



}



' ---------------
' LÉGENDE
' ---------------

'On pouvait aussi utiliser _note_ au lieu de _legend_ mais ca se met tout en haut:'
'(cf note dans http://plantuml.com/fr/class-diagram)'
'note as N1'

skinparam legendFontSize 11
legend top left

Diagramme UML de Cas d'Utilisation du 13/11/2020 - Etienne Pallier
(généré avec PlantUML - http://plantuml.com)

Notes :
- Tous ces Cas d'Utilisation sont soumis à une première étape d'authentification (login).
- Ils impliquent aussi systèmatiquement un accès à la BD (lecture ou/et écriture).
- Le Cas d'Utilisation UC1 ne demande pas forcément de développement, car l'Administrateur pourra utiliser des outils existants (tels que PhpMyAdmin) pour gérer la BD (mais si le temps le permet on pourrait envisager une interface d'administration)
- Le Cas d'Utilisation UC3 n'est qu'un sous ensemble de UC2. 
- Le Cas d'Utilisation UC4 est inutile si on équipe l'Accueil et les Vendeurs de tablettes en wifi.
  (la/le caissi-er-ère équipée d'un PC fixe pourrait avoir accès au même formulaire que celui des vendeurs, le prix total à payer étant déjà calculé, au fur et à mesure) 
- Les Cas d'Utilisation UC6 et UC7 ne nécessitent a priori pas de formulaire, mais juste un bouton qui va déclencher l'impression des rapports

- Les 2 seuls gros Cas d'Utilisation qui ont vraiment besoin de formulaires (et assez complexes) sont les UC2 et UC5 :
	\t- le Cas d'Utilisation UC2 (Gestion bénéficiaires) ne nécessite qu'un seul gros formulaire
	\t- le Cas d'Utilisation UC5 (Achat) nécessite 2 formulaires :
		\t\t1) liste des bénéficiaires autorisés pour une permanence donnée (avec possibilité de mise à jour : présence...)
		\t\t2) liste des achats d'un bénéficiare, avec calcul automatique du prix total à payer (même formulaire utilisé par les vendeurs et le caissier)

end legend
'end note'


@enduml
